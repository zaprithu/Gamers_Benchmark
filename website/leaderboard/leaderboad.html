<!--
    leaderboard.html
    HTML file for game leaderboard page
    Made by: Tommy Lam

    Created 11/23/2024
    Edited 11/24/2024 (Tommy):
        - Added comments
    Edited 11/24/2024 (Zonaid):
        - Added login-signin session and database functionality
    Preconditions:
        • index.css must be properly linked and accessible
        • PHP server must be running to handle data requests
        • Database connection must be available for leaderboard data retrieval
    Postconditions:
        • Displays navigation bar with proper authentication links
        • Shows sidebar with all game categories
        • Presents leaderboard table with player rankings
        • Updates category selection when user clicks different games
        • Displays total player count for current category
    Errors:
        None
    Side effects:
        None
    Invariants:
        • Navigation bar remains fixed at top
        • Footer stays at bottom of page
        • Sidebar categories list remains constant
        • Active category is always highlighted
    Known faults:
        None
-->

<?php
session_start();

// Check if the user is logged in
$isLoggedIn = isset($_SESSION['logged_in']) && $_SESSION['logged_in'];

// Access the username stored in the session, with a fallback
$username = $isLoggedIn ? $_SESSION['username'] : null;
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard - Gamers Benchmark</title>
    <link rel="stylesheet" href="../../index.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <h2>Gamers Benchmark</h2>
        </div>
        <div class="nav-links">
            <a href="../../index.php">Home</a>
            <a href="leaderboard.html">Leaderboard</a>
            <a href="website/about/about.php">About</a>
            <a href="website/log-signup/handlers/logout.php" class="btn">Sign Out</a>
            <span class="profile">Profile</span>
            <a href="website/log-signup/login.html" class="btn">Login</a>
            <a href="website/log-signup/signup.php" class="btn">Sign Up</a>
        </div>
    </nav>

    <div class="leaderboard-container">
        <!-- Category Sidebar -->
        <aside class="category-sidebar">
            <h2>Categories</h2>
            <div class="category-links">
                <a href="#category1" class="category-item active" onclick="showLeaderboard('category1')">Maze Navigation</a>
                <a href="#category2" class="category-item" onclick="showLeaderboard('category2')">Estimate</a>
                <a href="#category3" class="category-item" onclick="showLeaderboard('category3')">Spot the Object</a>
                <a href="#category4" class="category-item" onclick="showLeaderboard('category4')">Whack-A-Mole</a>
                <a href="#category5" class="category-item" onclick="showLeaderboard('category5')">Boggle</a>
                <a href="#category6" class="category-item" onclick="showLeaderboard('category6')">Simon says</a>
                <a href="#category7" class="category-item" onclick="showLeaderboard('category7')">Rhythm</a>
                <a href="#category8" class="category-item" onclick="showLeaderboard('category8')">Bullet Hell</a>
                <a href="#category9" class="category-item" onclick="showLeaderboard('category9')">Platformer</a>
            </div>
        </aside>

        <!-- Main Leaderboard Content -->
        <main class="leaderboard-main">
            <div class="leaderboard-header">
                <h1>Leaderboard</h1>
                <div class="game-info">
                    <span class="current-game">Maze Navigation</span>
                    <span class="divider">|</span>
                    <span class="total-players">Total Players: <span id="playerCount">0</span></span>
                </div>
            </div>

            <div class="leaderboard-content">
                <!-- Table will be populated by PHP -->
                <table class="leaderboard-table">
                    <thead>
                        <tr>
                            <th class="rank-col">Rank</th>
                            <th class="name-col">Name</th>
                            <th class="score-col">Score</th>
                            <th class="time-col">Time</th>
                            <th class="date-col">Date</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <!-- PHP will populate this section -->
                        <!-- Example row structure -->
                        <tr>
                            <td class="rank-col">
                                <span class="rank">1</span>
                            </td>
                            <td class="name-col">
                                <div class="player-info">
                                    <span class="player-name">Tommy</span>
                                </div>
                            </td>
                            <td class="score-col">10,500</td>
                            <td class="time-col">1:23.45</td>
                            <td class="date-col">Nov 24, 2024</td>
                        </tr>
                        <tr>
                            <td class="rank-col">
                                <span class="rank">2</span>
                            </td>
                            <td class="name-col">
                                <div class="player-info">
                                    <span class="player-name">Chase</span>
                                </div>
                            </td>
                            <td class="score-col">1,500</td>
                            <td class="time-col">1:25.45</td>
                            <td class="date-col">Nov 24, 2024</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <footer class="footer">
        <p>© 2024 Gamers Benchmark. All rights reserved. | <a href="#">Privacy Policy</a></p>
    </footer>

    <script>
        function showLeaderboard(category) {
            // Remove active class from all categories
            document.querySelectorAll('.category-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to selected category
            event.target.classList.add('active');
            
            // Update game title
            const gameTitle = event.target.textContent;
            document.querySelector('.current-game').textContent = gameTitle;
            
        }
    </script>
</body>
</html>